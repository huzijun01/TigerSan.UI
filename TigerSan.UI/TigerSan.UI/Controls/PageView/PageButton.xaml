<UserControl x:Class="TigerSan.UI.Controls.PageButton"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:local="clr-namespace:TigerSan.UI.Controls"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             xmlns:converters="clr-namespace:TigerSan.UI.Converters"
             mc:Ignorable="d" 
             Cursor="Hand"
             Width="150"
             MinWidth="100"
             MaxWidth="150"
             Margin="0,0,5,0"
             d:DesignWidth="150"
             d:DesignHeight="50">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary  Source="/TigerSan.UI;component/Styles/Global/Global.xaml"/>
                <ResourceDictionary  Source="/TigerSan.UI;component/Styles/Templates/CircleButtonTemplate.xaml"/>
                <ResourceDictionary>
                    <local:PageButtonDesignData x:Key="PageButtonDesignData"/>
                    <converters:Bool2VisibilityConverter x:Key="Bool2VisibilityConverter"/>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>

            <!-- 常量: -->
            <system:Double x:Key="PageButton.FontSize">16</system:Double>
            <CornerRadius x:Key="PageButton.CornerRadius">16</CornerRadius>

            <!-- 图标: -->
            <Style x:Key="PageButtonIconLabelStyle" TargetType="{x:Type Label}">
                <Setter Property="Padding" Value="0"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="Width" Value="{StaticResource PageButton.FontSize}"/>
                <Setter Property="Height" Value="{StaticResource PageButton.FontSize}"/>
                <Setter Property="FontSize" Value="{StaticResource PageButton.FontSize}"/>
                <Setter Property="FontFamily" Value="{StaticResource Iconfont}"/>
                <Setter Property="Foreground" Value="{StaticResource Colors.PrimaryText}"/>
            </Style>

            <!-- 文本框: -->
            <Style x:Key="PageButtonTextBlockStyle" TargetType="{x:Type TextBlock}">
                <Setter Property="Margin" Value="5,0"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                <Setter Property="FontSize" Value="{StaticResource NavText.FontSize}"/>
                <Setter Property="Foreground" Value="{StaticResource Colors.PrimaryText}"/>
            </Style>

            <!-- 按钮: -->
            <Style x:Key="PageButtonButtonStyle" TargetType="{x:Type Button}">
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Center"/>
                <Setter Property="Foreground" Value="{StaticResource Colors.PrimaryText}"/>
                <Setter Property="Template" Value="{StaticResource CircleButtonTemplate}"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid
        VerticalAlignment="Center"
        d:DataContext="{StaticResource PageButtonDesignData}"
        DataContext="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}">
        <Border x:Name="bdrMain" CornerRadius="10,10,0,0">
            <Border
                x:Name="bdrSub"
                Padding="5"
                CornerRadius="10"
                Background="Transparent">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- 图标: -->
                    <Label
                        Content="{Binding Icon}"
                        Foreground="{Binding Foreground}"
                        Style="{StaticResource PageButtonIconLabelStyle}"/>

                    <!-- 文本: -->
                    <TextBlock
                        Grid.Column="1"
                        Text="{Binding Title}"
                        Foreground="{Binding Foreground}"
                        Style="{StaticResource PageButtonTextBlockStyle}"/>

                    <!-- 关闭按钮: -->
                    <Button
                        x:Name="btnClose"
                        Grid.Column="2"
                        Content="{StaticResource Icons.Close}"
                        Foreground="{Binding Foreground}"
                        Visibility="{Binding IsShowCloseButton, Converter={StaticResource Bool2VisibilityConverter}}"
                        Style="{StaticResource PageButtonButtonStyle}"/>
                </Grid>
            </Border>
        </Border>

        <!-- 分隔线: -->
        <Line 
            Grid.Column="2"
            x:Name="line"
            Y2="20"
            StrokeThickness ="2"
            VerticalAlignment="Center"
            HorizontalAlignment="Right"/>
    </Grid>
</UserControl>
