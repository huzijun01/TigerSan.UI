<ResourceDictionary
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:prism="http://prismlibrary.com/"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:TigerSan.UI.Controls"
    xmlns:converters="clr-namespace:TigerSan.UI.Converters">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/TigerSan.UI;component/Styles/Global/Global.xaml"/>
        <ResourceDictionary Source="/TigerSan.UI;component/Styles/CheckBoxStyle.xaml"/>
        <ResourceDictionary Source="/TigerSan.UI;component/Styles/Global/TransparentUserControlStyle.xaml"/>
        <ResourceDictionary>
            <converters:Bool2VisibilityConverter x:Key="Bool2VisibilityConverter"/>
            <converters:SortMode2VisibilityConverter x:Key="SortMode2VisibilityConverter"/>
        </ResourceDictionary>
    </ResourceDictionary.MergedDictionaries>

    <!-- 设计数据： -->
    <local:TableHeaderDesignData x:Key="TableHeaderDesignData"/>
    <local:TableItemDesignData x:Key="TableItemDesignData"/>

    <!--  颜色：  -->
    <SolidColorBrush x:Key="TableItem.Static.Foreground" Color="White" />
    <SolidColorBrush x:Key="LinkItem.Static.Foreground" Color="#9dc4ff" />
    <SolidColorBrush x:Key="TableRow.Hover.Foreground" Color="White" />
    <SolidColorBrush x:Key="TableRow.Selected.Foreground" Color="Blue" />

    <!--  表格控件：  -->
    <Style x:Key="TableControlStyle" TargetType="{x:Type Control}">
        <Setter Property="Padding" Value="0"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="Foreground" Value="{DynamicResource TableItem.Static.Foreground}"/>
    </Style>

    <!--  表头容器：  -->
    <Style x:Key="TablePanelStyle" TargetType="{x:Type Grid}">
        <Setter Property="Margin" Value="8"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
    </Style>

    <!--  表头标签：  -->
    <Style x:Key="HeaderLabelStyle"
           TargetType="{x:Type ContentControl}"
           BasedOn="{StaticResource TableControlStyle}">
        <Setter Property="Margin" Value="6,0,0,0"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Right"/>
    </Style>

    <!--  表头文本块：  -->
    <Style x:Key="HeaderTextBlockStyle" TargetType="{x:Type TextBlock}">
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="TextWrapping" Value="NoWrap"/>
        <Setter Property="TextAlignment" Value="Center"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Stretch"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource TableItem.Static.Foreground}"/>
    </Style>

    <!--  水平分割线：  -->
    <Style x:Key="HorizontalDividingLineStyle" TargetType="{x:Type Line}">
        <Setter Property="VerticalAlignment" Value="Bottom"/>
        <Setter Property="Stretch" Value="Fill"/>
        <Setter Property="StrokeThickness" Value="1"/>
        <Setter Property="X2" Value="1"/>
        <Setter Property="Stroke" Value="{StaticResource TableItem.Static.Foreground}"/>
    </Style>

    <!--  垂直分割线：  -->
    <Style x:Key="VerticalDividingLineStyle" TargetType="{x:Type Line}">
        <Setter Property="Y2" Value="1"/>
        <Setter Property="Stretch" Value="Fill"/>
        <Setter Property="Cursor" Value="SizeWE"/>
        <Setter Property="StrokeThickness" Value="2"/>
        <Setter Property="HorizontalAlignment" Value="Right"/>
        <Setter Property="Stroke" Value="{StaticResource TableItem.Static.Foreground}"/>
    </Style>

    <!--  列宽手柄：  -->
    <Style x:Key="ColumnWidthHandleStyle"
               TargetType="{x:Type Border}">
        <Setter Property="Opacity" Value="0"/>
        <Setter Property="Cursor" Value="SizeWE"/>
        <Setter Property="HorizontalAlignment" Value="Right"/>
        <Setter Property="Width" Value="{StaticResource ColumnWidthHandle.Width}"/>
        <Setter Property="Background" Value="{StaticResource TableItem.Static.Foreground}"/>
    </Style>

    <!--  自动隐藏容器：  -->
    <Style x:Key="AutoHidePanelStyle" TargetType="{x:Type Panel}">
        <Setter Property="Opacity" Value="0"/>
        <Setter Property="Background" Value="{x:Null}"/>
        <!--  触发器：  -->
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Opacity" Value="1" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 表格复选框： -->
    <Style
        x:Key="TableCheckBoxStyle"
        TargetType="{x:Type CheckBox}"
        BasedOn="{StaticResource CheckBoxStyle}">
        <Setter Property="Margin" Value="5,0"/>
        <Setter Property="VerticalAlignment" Value="Center"/>
        <Setter Property="HorizontalAlignment" Value="Center"/>
    </Style>

    <!-- 表格复选框： -->
    <Style x:Key="RowBackgroundBorderStyle" TargetType="{x:Type Border}">
        <Setter Property="Opacity" Value="{StaticResource RowBackground.Opacity}"/>
    </Style>

    <!-- 列头模板： -->
    <DataTemplate x:Key="TableHeaderTemplate">
        <local:TableHeader
            HeaderModel="{Binding}"
            Text="{Binding Title}"
            Grid.Row="{Binding RowIndex}"
            Grid.Column="{Binding ColIndex}"
            Background="{Binding Background}"/>
    </DataTemplate>

    <!-- 项目模板: -->
    <DataTemplate x:Key="TableItemTemplate">
        <local:TableItem 
            ItemModel="{Binding}"
            Grid.Row="{Binding RowIndex}"
            Grid.Column="{Binding ColIndex}"
            ItemState="{Binding ItemState}"
            IsReadOnly="{Binding IsReadOnly}"
            Background="{Binding Background}"
            TextAlignment="{Binding TextAlignment}"/>
    </DataTemplate>

    <!-- 列头复选框模板: -->
    <DataTemplate x:Key="TableHeaderCheckBoxTemplate">
        <CheckBox
            IsChecked="{Binding IsSelectAll}"
            Visibility="{Binding IsShowCheckBox, Converter={StaticResource Bool2VisibilityConverter}}"
            Style="{StaticResource TableCheckBoxStyle}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Checked">
                    <prism:InvokeCommandAction Command="{Binding CheckedCommand}" />
                </i:EventTrigger>
                <i:EventTrigger EventName="Unchecked">
                    <prism:InvokeCommandAction Command="{Binding UncheckedCommand}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </CheckBox>
    </DataTemplate>

    <!-- 行复选框模板: -->
    <DataTemplate x:Key="TableRowCheckBoxTemplate">
        <CheckBox
            IsChecked="{Binding IsChecked}"
            Visibility="{Binding IsShowCheckBox, Converter={StaticResource Bool2VisibilityConverter}}"
            Style="{StaticResource TableCheckBoxStyle}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="Checked">
                    <prism:InvokeCommandAction Command="{Binding CheckedCommand}" CommandParameter="{Binding}" />
                </i:EventTrigger>
                <i:EventTrigger EventName="Unchecked">
                    <prism:InvokeCommandAction Command="{Binding UncheckedCommand}" CommandParameter="{Binding}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </CheckBox>
    </DataTemplate>
</ResourceDictionary>